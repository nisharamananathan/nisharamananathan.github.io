<!DOCTYPE html>
<html>
    <head> 
        <meta charset="UTF-8">
        <style>
            body {
            background-color: rgb(195, 240, 241);
            }
            h1 {
            color: #333;
            font-family: 'Trebuchet MS', sans-serif;
            font-size: 65px;
            font-weight: bold;
            text-align: center;
            }
            h2 {
            color: #333;
            font-family: 'Trebuchet MS', sans-serif;
            font-size: 35px;
            font-weight: bold;
            text-align: left;
            }
            p {
            color: #333;
            font-family: 'Trebuchet MS', sans-serif;
            font-size: 20px;
            text-align: left;
            }
            #controls {
            text-align: center;
            margin-top: 20px;
            }
        </style>
    </head>
    <script>
        function ButtonClick() {
            // what to do when button is clicked
        }
    </script>
    <body>
        <h1>Data Visualization Project CS 416</h1>
        <p> 
            This dataset contains information about passengers on the Titanic, including an ID, whether a passenger survived or not, 
            class (1, 2, or 3), name, sex, age, number of siblings or spouses on the Titanic, number of parents or children on the 
            Titanic, ticket number, and ticket fare. 
        </p>
        <hr>
        <div id="slideshow">
            <div id="slides">
            <h2>Pie Chart of Survived and Not Survived Titanic Passengers</h2>
                <p> 
                    This pie chart shows the percentage of passengers on the Titanic that survived and did not survive. This first slide is a general overview, which will be disected more in depth in the following slides. 
                </p>
                <script src='https://d3js.org/d3.v5.min.js'></script>
                <style> path {stroke: black;}</style>
                <body>
                    <svg width="400" height="400"></svg>
                    <script>
                        // create pie chart
                        async function fetchData() {
                            var response = await fetch("Titanic-Dataset.csv");
                            var data = await response.text();
                            data = d3.csvParse(data);

                            data.forEach(function(d) {
                                d.Survived = +d.Survived;
                            });

                            var color = ['green', 'red'];

                            var survived = d3.sum(data, function(d) { return d.Survived; });
                            var not_survived = data.length - survived;

                            var pieData = [
                                { label: "Survived", count: survived },
                                { label: "Not Survived", count: not_survived }
                            ];

                            var width = 400;
                            var height = 400;
                            var radius = 200;

                            var pie = d3.pie().value(function(d) { return d.count; });
                            var arc = d3.arc()
                                .innerRadius(0)
                                .outerRadius(radius);

                            var svg = d3.select("svg")
                                .attr("width", width)
                                .attr("height", height);

                            var g = svg.append("g").attr("transform", "translate(200,200)")

                            g.selectAll("arc")
                                .data(pie(pieData))
                                .enter()
                                .append("path")
                                .attr("d", arc)
                                .attr("fill", function(d, i) { return color[i]; });
                            
                            // add annotations to pie chart
                            var arcs = g.selectAll("arc")
                                .data(pie(pieData))
                                .enter()
                                .append("g");
                            
                            arcs.append("path")
                                .attr("d", arc)
                                .attr("fill", function(d, i) { return color[i]; });

                            arcs.append("text")
                                .attr("transform", function(d) {var centroid = arc.centroid(d); 
                                    return "translate(" + centroid[0] + "," + centroid[1] + ")";})
                                .attr("text-anchor", "middle")
                                .text(function(d) {var percentage = ((d.endAngle - d.startAngle) / (2 * Math.PI)) * 100;
                                    return d.data.label + "\n" + " (" + percentage.toFixed(1) + "%)";
                            });
                        }
                        fetchData();
                    </script>
                </body>
                <div id="controls">
                    <button id="prev">Previous</button>
                    <button id="next">Next</button>
                </div>
            </div>
            <div id="slides">
            <h2>xxx</h2>
                <p> 
                    xxx 
                </p>
                <div id="controls">
                    <button id="prev">Previous</button>
                    <button id="next">Next</button>
                </div>
            </div>
        </div>
    </body>
</html>